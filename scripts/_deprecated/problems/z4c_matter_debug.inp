<job>
problem_id = gr_hydro_debug

<z4c>
#dt_assert_is_finite = 1   # whatever values, if zero / missing these tasks are not triggered
dt_wave_extraction =0.1

# lapse_harmonic = 0.0
# lapse_harmonicf = 1.0
# lapse_oplog = 2.0
# lapse_advect = 1.0
# shift_eta = 0 # 0.3
# shift_advect = 1.0

# lapse_harmonic = 0.0
# lapse_harmonicf = 1.0
# lapse_oplog = 2.0
# lapse_advect = 1.0

# shift_Gamma = 0
# shift_advect = 0.0
# shift_alpha2Gamma = 0
# shift_H = 0
# shift_eta = 0.3

lapse_harmonic = 0.0
lapse_harmonicf = 1.0
lapse_oplog = 2.0
lapse_advect = 1.0
shift_eta = 0.3
shift_advect = 1.0


# Kreiss-Oliger dissipation parameter.
diss = 0.02 # 0.5
chi_div_floor = -1e-05
# Constraint damping factor 1.
damp_kappa1 = 0.02 # 0.02
# Constraint damping factor 2.
damp_kappa2 = 0.0

bitant = false

<trackers_extrema>  # =====================================
N_tracker = 1
filename = tra.ext

control_field = Z4c.chi

ini_1_x1 = 0               # initial offset
ini_1_x2 = 0
ini_1_x3 = 0
minima_1 = true              # for update_strategy = 1
ref_level_1 = 2
ref_type_1 = 1              # 0: to the point, 1: sph. region
ref_zone_radius_1 = 10


update_strategy = 1         # 0: based on dt, 1: based on quad interp.
# safety factor avoids taking too large step (multiple of local dx)
update_max_step_factor = 10
# =========================================================

<output1>
file_type = hdf5
variable  = cons
dt        = 0.1
ghost_zones=true
#x2_slice = 0.0
#x3_slice = 0.0
data_format=%.15g

<output2>
file_type = hdf5
variable  = prim
dt        = 0.1
ghost_zones=true
data_format=%.15g

<output3>
file_type = hdf5
variable  = prim
dt        = 0.1
ghost_zones=true
data_format=%.15g
x3_slice = 0.0

<output4>
file_type = hdf5
variable  = prim
dt        = 0.1
ghost_zones=true
data_format=%.15g
x2_slice = 0.0
x3_slice = 0.0

<output5>
file_type = hdf5
variable  = prim
dt        = 0.1
ghost_zones=true
data_format=%.15g
x1_slice = 0.0
x3_slice = 0.0

<output6>
file_type = hdf5
variable  = prim
dt        = 0.1
ghost_zones=false
data_format=%.15g
x1_slice = 0.0
x3_slice = 0.0

<output10>
file_type = hdf5
variable  = con
dt        = 0.01
ghost_zones=true
data_format=%.15g
# x1_slice = 0.0
x3_slice = 0.0

<output9>
file_type = hdf5
variable  = z4c
dt        = 0.01
ghost_zones=true
data_format=%.15g
# x1_slice = 0.0
x3_slice = 0.0

# <output1>
# file_type = hdf5
# variable  = cons
# dt        = 0.1
# ghost_zones=true
# #x2_slice = 0.0
# #x3_slice = 0.0
# data_format=%.15g
#
#
# <output2>
# file_type = hdf5
# variable  = prim
# dt        = 0.1
# ghost_zones=true
# #x2_slice = 0.0
# x3_slice = 0.0
# data_format=%.15g
#
#
# <output4>
# file_type = hdf5
# variable  = adm
# dt        = 0.1
# ghost_zones=true
# #x2_slice = 0.0
# x3_slice = 0.0
# data_format=%.15g
#
#
# <output5>
# file_type = hdf5
# variable  = z4c
# dt        = 0.1
# ghost_zones=true
# #x2_slice = 0.0
# x3_slice = 0.0
# data_format=%.15g
# <output4>
# file_type       = hdf5                 # Athena++ hdf5 data
# variable        = con                  # variables to be output
# dt              = 0.1                  # time increment between outputs
# data_format     = %.16e
# x2_slice = 0
# x3_slice = 0
# <output6>
# file_type = hdf5
# variable  = con
# dt        = 0.1
# ghost_zones=true
# # x2_slice = 0.0
# x3_slice = 0.0
# data_format=%.15g

<output7>
file_type = hst
dt        = 1e-4
# data_format=%.2g
data_format=%.16e

<output8>
file_type = rst
dt        = 200


<time>
cfl_number = 0.125
# nlim       = 10000
# tlim       = 10000
# nlim       = 1000
tlim       = 2
integrator = rk4   # time integration algorithm
xorder     = 5    # order of spatial reconstruction
ncycle_out = 1      # interval for stdout summary info

<mesh>
nx1    = 64    # number of cells in x-direction
x1min  = -1   # minimum x
x1max  = 1 # maximum x
ix1_bc = periodic  # lower boundary
ox1_bc = periodic  # upper boundary

nx2    = 64  # number of cells in y-direction
x2min  = -1  # minimum y
x2max  = 1  # maximum y
ix2_bc = periodic # lower boundary
ox2_bc = periodic # upper boundary

nx3    = 64        # number of cells in z-direction
x3min  = -1   # minimum z
x3max  = 1       # maximum z
ix3_bc = periodic  # lower  boundary
ox3_bc = periodic  # upper boundary

refinement = none
# maximum
numlevel = 3
#deref_count = 5

num_threads = 8


<meshblock>
nx1=32
nx2=32
nx3=32

<refinement1>
x1min           = -0.1
x1max           = 0.1
x2min           = -0.1
x2max           = 0.1
x3min           = -0.1
x3max           = 0.1
level           = 2

<hydro>
gamma = 2  # ratio of specific heats Gamma
k_adi = 1                # adiabat K, p_gas = K rho^Gamma

dfloor = 1e-50                # floor value for rho equiv atmosphere rho
pfloor = 1e-50                # floor value for rho equiv atmosphere rho
rho_min=1e-50
pgas_min=1e-50
fix_fluxes=0 #use initial data in flux calculation
fix_sources=0 #use initial data in hydro source calculation (stationary spacetime only)
zero_sources=0 # set hydro sources to 0
zero_div=0 # set div F = 0 i.e. don't update conservatives with fluxes

<problem>

ID_pert_g_A_diag = 1.0
ID_pert_g_A      = 1e-4
ID_pert_g_f2     = 1.0
ID_pert_g_phi    = 0

ID_pert_K_A_diag = 0.8
ID_pert_K_A      = 1e-5
ID_pert_K_f2     = 1.0
ID_pert_K_phi    = 0

# following is redundant by default
ID_pert_rho_min = -1e-2
ID_pert_rho_A   = -1e-3
ID_pert_rho_f2  = -1.0
ID_pert_rho_phi = -0.0

ID_pert_p_min = -1e-2
ID_pert_p_A   = -1e-3
ID_pert_p_f2  = -1.0
ID_pert_p_phi = -0.0

ID_pert_util_0   = 0.02
ID_pert_util_1   = -0.03
ID_pert_util_2   = 0.01

ID_pert_util_A   = 1e-4
ID_pert_util_f2  = 1.0
ID_pert_util_phi = 0.0
#

# TOV: central density
rhoc = 0.00128

# Atmosphere settings
fatm = 0.00000000000000078125  # set atmosphere rho to rho = rhomax * fatm
fthr = 1  # set point to atmosphere if rho < fthr*fatm*rhomax
