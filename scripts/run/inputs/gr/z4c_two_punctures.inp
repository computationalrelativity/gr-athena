<comment> # ===================================================================
# additional comments (such as e.g. compilation parameters go here)
# ...
# =============================================================================

<job> # =======================================================================
problem_id = z4c_two_punctures
# =============================================================================

<z4c> # =======================================================================
lapse_harmonic  = 0.0
lapse_harmonicf = 1.0
lapse_oplog     = 2.0
lapse_advect    = 1.0
lapse_K         = 0.0

shift_Gamma       = 1.0  # T 2011: BNS takes 0.75
shift_eta         = 2.0   # T 2011
shift_alpha2Gamma = 0.0
shift_H           = 0.0
shift_advect      = 1.0

# Kreiss-Oliger dissipation parameter.
diss = 0.2
# conformal factor flooring
chi_div_floor = 1e-5

# Constraint damping factors
damp_kappa1 = 0.02
damp_kappa2 = 0.0

# do not compute constraints outside this radius (relative to origin)
r_max_con = 512

# shift based tracker
npunct = 2
bh_0_x = 3.257
bh_1_x = -3.257

# =============================================================================

<task_triggers>  # ============================================================
# control frequency of task execution; certain constraints are augmented
# further automatically by choices in output block

# missing / zero values do not get activated
adjust_mesh_dt = true

tracker_extrema = 0.25
dt_Z4c_Weyl     = 0.0
# =============================================================================

<psi4_extraction>  # ==========================================================
# control psi4 extraction

filename  = wav

nlev = 30  # Controls # of points on spherical grid
lmax = 8   # Extracted set: {l <= lmax && |m|<=l}

# specify extraction radii
num_radii = 11
radius_0  = 50
radius_1  = 60
radius_2  = 70
radius_3  = 80
radius_4  = 90
radius_5  = 100
radius_6  = 110
radius_7  = 120
radius_8  = 130
radius_9  = 140
radius_10 = 150
# =============================================================================

<trackers_extrema>  # =========================================================
# control trackers based on field extrema

N_tracker = 2
filename = tra.ext

control_field = Z4c.alpha

ini_1_x1          = -3.257 # initial offset
ini_1_x2          = 0
ini_1_x3          = 0
minima_1          = true  # for update_strategy = 1
ref_level_1       = 2
ref_type_1        = 1     # 0: to the point, 1: sph. region
ref_zone_radius_1 = 2.5

ini_2_x1          = 3.257
ini_2_x2          = 0.0
ini_2_x3          = 0.0
minima_2          = true
ref_level_2       = 2
ref_type_2        = 1
ref_zone_radius_2 = 2.5

update_strategy = 1       # 0: based on dt, 1: based on quad interp.

# safety factor avoids taking too large step (multiple of local dx)
update_max_step_factor = 10

# max number of iterations to perform for interp method
iter_max = 250
# abs. tol. for step update
tol_ds = 1e-12
# take ds / interp_ds_fac during interpolation / interp
interp_ds_fac = 10
# =============================================================================

<time> # ======================================================================
cfl_number   = 0.2
tlim	     = 100
integrator   = rk4   # time integration algorithm

ncycle_out   = 1      # interval for stdout summary info
# =============================================================================

<mesh> # ======================================================================
# no. cell in dir, min/max x, inner/outer BC
nx1    = 96
x1min  = -64
x1max  = 64
ix1_bc = extrapolate_outflow
ox1_bc = extrapolate_outflow

nx2    = 96
x2min  = -64
x2max  = 64
ix2_bc = extrapolate_outflow
ox2_bc = extrapolate_outflow

nx3    = 96
x3min  = -64
x3max  = 64
ix3_bc = extrapolate_outflow
ox3_bc = extrapolate_outflow

refinement = static
numlevel = 15
#deref_count = 5

num_threads = 4

# impose bitant symmetry (use with ix3_bc=reflecting)
# bitant = true
# =============================================================================

<meshblock> # =================================================================
nx1=16
nx2=16
nx3=16
# =============================================================================

<problem> # ===================================================================
verbose = True

# x coordinate of the m+ puncture
par_b = 3.257
# mass of the m+ puncture
par_m_plus = 0.483
# mass of the m- puncture
par_m_minus = 0.483
# target ADM mass for m+
target_M_plus = 0.505
# target ADM mass for m-
target_M_minus = 0.505
# momentum of the m+ puncture
par_P_plus1 = 0.0
par_P_plus2 = 0.133
par_P_plus3 = 0.0
# momentum of the m- puncture
par_P_minus1 = 0.0
par_P_minus2 = -0.133
par_P_minus3 = 0.0

# spin of the m+ puncture
par_S_plus1 = 0.0
par_S_plus2 = 0.0
par_S_plus3 = 0.0
# spin of the m- puncture
par_S_minus1 = 0.0
par_S_minus2 = 0.0
par_S_minus3 = 0.0
# offset b=0 to position (x,y,z)
center_offset1 = 0.0
center_offset2 = 0.0
center_offset3 = 0.0
# User provides bare masses not target M_ADM
give_bare_mass = True
# No. coeff in the compactified radial dir.
npoints_A = 36
# No. coeff in the angular dir.
npoints_B = 36
# no. coeff in the phi dir.
npoints_phi = 26
# Tolerance for Newton solver
Newton_tol = 1e-10
# Maximum number of Newton iterations
Newton_maxit = 5
# A small number to smooth out singularities at punc. loc.
TP_epsilon = 0.0
# Tiny number to avoid nans near or at the puncture locations
TP_Tiny = 0.0
# Radius of an extended spacetime instead of the puncture
TP_Extend_radius = 0
# Tol. of ADM masses when give_bare_mass=no
adm_tol = 1e-10
do_residuum_debug_output = True
do_initial_debug_output = True
# Solve for momentum constraint?
solve_momentum_constraint = False
# Exponent n for psi^-n initial lapse profile (<0)
initial_lapse_psi_exponent = -2.0
# x<->z coord interchange during interp. (black holes become separated in z direction)
swap_xz = False
n_punct = 2

# impose bitant symmetry on ID directly through spectral interp. massage
impose_bitant_id = True
# =============================================================================

<refinement1> # ===============================================================
x1min           = -6.257
x1max           = -0.257
x2min           = -3
x2max           = 3
x3min           = -3
x3max           = 3
level           = 2
# =============================================================================

<refinement2> # ===============================================================
x1min           = 0.257
x1max           = 6.257
x2min           = -3
x2max           = 3
x3min           = -3
x3max           = 3
level           = 2
# =============================================================================

# dumped quantities ===========================================================
<output1>
file_type = rst
dt        = 100

<output2>
file_type   = hst
dt          = 0.1
data_format = %.18g

<output3>
file_type   = hdf5
variable    = con
ghost_zones = true
dt          = 0.5
x3_slice    = 0

<output4>
file_type   = hdf5
variable    = adm
ghost_zones = true
dt          = 0.5
x3_slice    = 0.0

<output5>
file_type   = hdf5
variable    = z4c
ghost_zones = true
dt          = 0.5
x3_slice    = 0.0

<output6>
file_type   = hdf5
variable    = con
ghost_zones = true
dt          = 0.5
x2_slice    = 0

<output7>
file_type   = hdf5
variable    = adm
ghost_zones = true
dt          = 0.5
x2_slice    = 0.0

<output8>
file_type   = hdf5
variable    = z4c
ghost_zones = true
dt          = 0.5
x2_slice    = 0.0

<output9>
file_type   = hdf5
variable    = con
ghost_zones = true
dt          = 0.5
x1_slice    = 0

<output10>
file_type   = hdf5
variable    = adm
ghost_zones = true
dt          = 0.5
x1_slice    = 0.0

<output11>
file_type   = hdf5
variable    = z4c
ghost_zones = true
dt          = 0.5
x1_slice    = 0.0

#
# :D
#
