<comment> # ===================================================================
# additional comments (such as e.g. compilation parameters go here)
# ...
# =============================================================================

<job> # =======================================================================
problem_id = z4c_tov_mhd
# =============================================================================

<z4c> # =======================================================================
lapse_harmonic  = 0.0
lapse_harmonicf = 1.0
lapse_oplog     = 2.0
lapse_advect    = 1.0
lapse_K         = 0.0

# lapse_harmonic  = 0.0
# lapse_harmonicf = 0.0
# lapse_oplog     = 0.0
# lapse_advect    = 0.0
# lapse_K         = 0.0


shift_Gamma       = 1     # T 2011: BNS takes 0.75
shift_eta         = 0.3   # T 2011
shift_alpha2Gamma = 0.0
shift_H           = 0.0
shift_advect      = 1.0

# shift_Gamma       = 0     # T 2011: BNS takes 0.75
# shift_eta         = 0.   # T 2011
# shift_alpha2Gamma = 0.
# shift_H           = 0.
# shift_advect      = 0.

# Kreiss-Oliger dissipation parameter.
diss = 0.1
# conformal factor flooring
chi_div_floor = 1e-10

# Constraint damping factors
damp_kappa1 = 0.02
damp_kappa2 = 0.0

# do not compute constraints outside this radius (relative to origin)
r_max_con = 18

# Cowling? (set metric rhs  = 0)
cowling_true = 0
fixedgauge = 0 # set rhs of gauge = 0
fix_admsources = 0 # calculate adm sources with initial data
# =============================================================================

<task_triggers>  # ============================================================
# control frequency of task execution; certain constraints are augmented
# further automatically by choices in output block

# missing / zero values do not get activated
adjust_mesh_dt = true

tracker_extrema = 0.25
dt_Z4c_Weyl     = 0.0
# =============================================================================

<trackers_extrema>  # =========================================================
N_tracker = 0
filename = tra.ext

control_field = Z4c.chi

ini_1_x1 = 0               # initial offset
ini_1_x2 = 0
ini_1_x3 = 0
minima_1 = true              # for update_strategy = 1
ref_level_1 = 2
ref_type_1 = 1              # 0: to the point, 1: sph. region
ref_zone_radius_1 = 10


update_strategy = 1         # 0: based on dt, 1: based on quad interp.
# safety factor avoids taking too large step (multiple of local dx)
update_max_step_factor = 10
# =========================================================

<time> # ======================================================================
cfl_number   = 0.2
tlim	       = 5
integrator   = rk3   # time integration algorithm

# spatial reconstruction - element of:
# {donate, lin_vl, lin_mc2, ppm, ceno3, weno5, weno5z, weno5d_si,
#  mp3, mp5, mp7, mp5_R}

xorder = weno5d_si
xorder_eps = 1e-40

xorder_use_fb = false              # control if fallback is used
xorder_use_fb_unphysical = false  # optinally verify (fluid) energy cond.
xorder_fb = lin_vl

floor_both_states = false  # reset both l/r [Reprimand only]

ncycle_out   = 1      # interval for stdout summary info
# =============================================================================

<mesh> # ======================================================================
# no. cell in dir, min/max x, inner/outer BC
nx1    = 64
x1min  = -25
x1max  = 25
ix1_bc = gr_sommerfeld
ox1_bc = gr_sommerfeld

nx2    = 64
x2min  = -25
x2max  = 25
ix2_bc = gr_sommerfeld
ox2_bc = gr_sommerfeld

nx3    = 64
x3min  = -25
x3max  = 25
ix3_bc = gr_sommerfeld
ox3_bc = gr_sommerfeld

refinement = static
numlevel = 3
#deref_count = 5

num_threads = 4

# impose bitant symmetry (use with ix3_bc=reflecting)
bitant = false
# =============================================================================

<meshblock> # =================================================================
nx1=16
nx2=16
nx3=16
# =============================================================================


<hydro> # =====================================================================
gamma      = 2     # ratio of specific heats Gamma
k_adi      = 100.  # adiabat K, p_gas = K rho^Gamma
c2p_acc    = 1e-12
rho_strict = 0 # 1e-20

fix_fluxes=0 #use initial data in flux calculation
fix_sources=0 #use initial data in hydro source calculation (stationary spacetime only)
zero_sources=0 # set hydro sources to 0
zero_div=0 # set div F = 0 i.e. don't update conservatives with fluxes

# =============================================================================


<problem> # ===================================================================

# TOV: central density
rhoc = 0.00128

# TOV: starting integration radius
rmin = 0
# TOV: integration step-size & max-points
dr   = 1e-2  # TOV integration step
npts = 10000000
# TOV: spacing & number of points to retain for polar->cart interpolation
interp_dr   = 1e-2
interp_npts = 100000

# # TOV: starting integration radius
# rmin = 0
# # TOV: integration step-size & max-points
# dr   = 1e-3  # TOV integration step
# npts = 100000000
# # TOV: spacing & number of points to retain for polar->cart interpolation
# interp_dr   = 1e-2
# interp_npts = 10000000

# TOV: minimum step-size for surface identification
surf_dr = 1e-14

# TOV: spatial offset & boost params
x_0_x1 = 0.0
x_0_x2 = 0.0
x_0_x3 = 0.0

v_b_x1 = 0. # 0.2
v_b_x2 = 0. # 0.1
v_b_x3 = 0. # -0.1

# Magnetic fields
b_amp    = 0.1
pcut     = 0.04
magindex = 0

# Atmosphere settings
fatm = 1e-40  # set atmosphere rho to rho = fatm
fthr = 1    # set point to atmosphere if rho < fthr*fatm

max_z = 10
# =============================================================================

<refinement1> # ===============================================================
x1min           = -10
x1max           = 10
x2min           = -10
x2max           = 10
x3min           = -10
x3max           = 10
level           = 1
# =============================================================================

# dumped quantities ===========================================================
<output1>
file_type = rst
dt        = 100

<output2>
file_type   = hst
dt          = 0.1
data_format = %.18g

<output3>
file_type   = hdf5
variable    = cons
ghost_zones = true
dt          = 0.01
x3_slice    = 0.0

<output4>
file_type   = hdf5
variable    = prim
ghost_zones = true
dt          = 0.01
x3_slice    = 0.0

<output5>
file_type	  = hdf5
variable    = con
ghost_zones = true
dt          = 0.01
x3_slice    = 0

<output6>
file_type   = hdf5
variable    = adm
ghost_zones = true
dt          = 0.01
x3_slice    = 0.0

<output7>
file_type   = hdf5
variable    = z4c
ghost_zones = true
dt          = 0.01
x3_slice    = 0.0

<output8>
file_type   = hdf5
variable    = cons
ghost_zones = true
dt          = 0.01
x2_slice    = 0.0

<output9>
file_type   = hdf5
variable    = prim
ghost_zones = true
dt          = 0.01
x2_slice    = 0.0

<output10>
file_type   = hdf5
variable    = con
ghost_zones = true
dt          = 0.01
x2_slice    = 0

<output11>
file_type   = hdf5
variable    = adm
ghost_zones = true
dt          = 0.01
x2_slice    = 0.0

<output12>
file_type   = hdf5
variable    = z4c
ghost_zones = true
dt          = 0.01
x2_slice    = 0.0

<output13>
file_type   = hdf5
variable    = cons
ghost_zones = true
dt          = 0.01
x1_slice    = 0.0

<output14>
file_type   = hdf5
variable    = prim
ghost_zones = true
dt          = 0.01
x1_slice    = 0.0

<output15>
file_type   = hdf5
variable    = con
ghost_zones = true
dt          = 0.01
x1_slice    = 0

<output16>
file_type   = hdf5
variable    = adm
ghost_zones = true
dt          = 0.01
x1_slice    = 0.0

<output17>
file_type   = hdf5
variable    = z4c
ghost_zones = true
dt          = 0.01
x1_slice    = 0.0


<output18>
file_type   = hdf5
variable    = cons
ghost_zones = true
dt          = 0.01
x2_slice    = 0.0
x3_slice    = 0.0

<output19>
file_type   = hdf5
variable    = prim
ghost_zones = true
dt          = 0.01
x2_slice    = 0.0
x3_slice    = 0.0

<output20>
file_type	  = hdf5
variable    = con
ghost_zones = true
dt          = 0.01
x2_slice    = 0.0
x3_slice    = 0

<output21>
file_type   = hdf5
variable    = adm
ghost_zones = true
dt          = 0.01
x2_slice    = 0.0
x3_slice    = 0.0

<output22>
file_type   = hdf5
variable    = z4c
ghost_zones = true
dt          = 0.01
x2_slice    = 0.0
x3_slice    = 0.0

#
# :D
#