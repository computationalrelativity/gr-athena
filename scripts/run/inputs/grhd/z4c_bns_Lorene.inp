<comment> # ===================================================================
# additional comments (such as e.g. compilation parameters go here)
# ...
# =============================================================================

<job> # =======================================================================
problem_id = z4c_bns_Lorene
# =============================================================================

<z4c> # =======================================================================
lapse_harmonic  = 0.0
lapse_harmonicf = 1.0
lapse_oplog     = 2.0
lapse_advect    = 1.0
lapse_K         = 0.0

shift_Gamma       = 1     # T 2011: BNS takes 0.75
shift_eta         = 0.3   # T 2011
shift_alpha2Gamma = 0.0
shift_H           = 0.0
shift_advect      = 1.0

# Kreiss-Oliger dissipation parameter.
diss = 0.1
# conformal factor flooring
chi_div_floor = 1e-5

# Constraint damping factors
damp_kappa1 = 0.02
damp_kappa2 = 0.0

# do not compute constraints outside this radius (relative to origin)
r_max_con = 256
# =============================================================================

<task_triggers>  # ============================================================
# control frequency of task execution

# whatever values, if zero / missing these tasks are not triggered
dt_psi4_extraction  = 0.1
dt_assert_is_finite = 1.0
# =============================================================================

<psi4_extraction>  # ==========================================================
# control psi4 extraction

filename  = wav

nlev = 30  # Controls # of points on spherical grid
lmax = 8   # Extracted set: {l <= lmax && |m|<=l}

# specify extraction radii
num_radii = 11
radius_0  = 50
radius_1  = 60
radius_2  = 70
radius_3  = 80
radius_4  = 90
radius_5  = 100
radius_6  = 110
radius_7  = 120
radius_8  = 130
radius_9  = 140
radius_10 = 150
# =============================================================================

<trackers_extrema>  # =========================================================
# control trackers based on field extrema

N_tracker = 2
filename = tra.ext

control_field = Z4c.alpha

ini_1_x1          = -15.1 # initial offset
ini_1_x2          = 0
ini_1_x3          = 0
minima_1          = true  # for update_strategy = 1
ref_level_1       = 6
ref_type_1        = 1     # 0: to the point, 1: sph. region
ref_zone_radius_1 = 15

ini_2_x1          = 15.1
ini_2_x2          = 0.0
ini_2_x3          = 0.0
minima_2          = true
ref_level_2       = 6
ref_type_2        = 1
ref_zone_radius_2 = 15

update_strategy = 1       # 0: based on dt, 1: based on quad interp.

# safety factor avoids taking too large step (multiple of local dx)
update_max_step_factor = 10

# number of iterations to perform for interp method
iter_max = 250
# abs. tol. for step update
tol_ds = 1e-14
# take ds / interp_ds_fac during interpolation / interp
interp_ds_fac = 10
# =============================================================================

<time> # ======================================================================
cfl_number   = 0.25
tlim	       = 100
integrator   = rk3   # time integration algorithm

# spatial reconstruction - element of:
# {1, 2, 2c, 3, 3c, 4, 4c, ceno3, mp3, mp5, mp7, weno5, weno5z, weno5d_si}
xorder       = weno5z

ncycle_out   = 1      # interval for stdout summary info
# =============================================================================

<hydro> # =====================================================================
gamma      = 2                    # ratio of specific heats Gamma
k_adi      = 123.63657447688378   # adiabat K, p_gas = K rho^Gamma
c2p_acc    = 1e-12
rho_strict = 1e-20
# =============================================================================

<mesh> # ======================================================================
# no. cell in dir, min/max x, inner/outer BC
nx1    = 128
x1min  = -40
x1max  = 40
ix1_bc = periodic
ox1_bc = periodic

nx2    = 128
x2min  = -40
x2max  = 40
ix2_bc = periodic
ox2_bc = periodic

nx3    = 128
x3min  = -40
x3max  = 40
ix3_bc = periodic
ox3_bc = periodic

refinement = none
numlevel = 10
#deref_count = 5

num_threads = 8

# impose bitant symmetry (use with ix3_bc=reflecting)
bitant = false
# =============================================================================

<meshblock> # =================================================================
nx1=16
nx2=16
nx3=16
# =============================================================================

<problem> # ===================================================================
filename = OVERWRITE_ME # can be done on cmd line..

fix_gauge_precollapsed = 1

# Atmosphere settings
fatm = 1e-18  # set atmosphere rho to rho = fatm
fthr = 1  # set point to atmosphere if rho < fthr*fatm

max_z = 10
# =============================================================================

<refinement1> # ===============================================================
x1min           = -30.1
x1max           = -0.1
x2min           = -15
x2max           = 15
x3min           = -15
x3max           = 15
level           = 6
# =============================================================================

<refinement2> # ===============================================================
x1min           = 0.1
x1max           = 30.1
x2min           = -15
x2max           = 15
x3min           = -15
x3max           = 15
level           = 6
# =============================================================================

# dumped quantities ===========================================================
<output1>
file_type = rst
dt        = 100

<output2>
file_type   = hst
dt          = 0.1
data_format = %.18g

<output3>
file_type   = hdf5
variable    = cons
ghost_zones = true
dt          = 0.5
x3_slice    = 0.0

<output4>
file_type   = hdf5
variable    = prim
ghost_zones = true
dt          = 0.5
x3_slice    = 0.0

<output5>
file_type	  = hdf5
variable    = con
ghost_zones = true
dt          = 0.5
x3_slice    = 0

<output6>
file_type   = hdf5
variable    = adm
ghost_zones = true
dt          = 0.5
x3_slice    = 0.0

<output7>
file_type   = hdf5
variable    = z4c
ghost_zones = true
dt          = 0.5
x3_slice    = 0.0

<output8>
file_type   = hdf5
variable    = cons
ghost_zones = true
dt          = 0.5
x2_slice    = 0.0

<output9>
file_type   = hdf5
variable    = prim
ghost_zones = true
dt          = 0.5
x2_slice    = 0.0

<output10>
file_type   = hdf5
variable    = con
ghost_zones = true
dt          = 0.5
x2_slice    = 0

<output11>
file_type   = hdf5
variable    = adm
ghost_zones = true
dt          = 0.5
x2_slice    = 0.0

<output12>
file_type   = hdf5
variable    = z4c
ghost_zones = true
dt          = 0.5
x2_slice    = 0.0

<output13>
file_type   = hdf5
variable    = cons
ghost_zones = true
dt          = 0.5
x1_slice    = 0.0

<output14>
file_type   = hdf5
variable    = prim
ghost_zones = true
dt          = 0.5
x1_slice    = 0.0

<output15>
file_type   = hdf5
variable    = con
ghost_zones = true
dt          = 0.5
x1_slice    = 0

<output16>
file_type   = hdf5
variable    = adm
ghost_zones = true
dt          = 0.5
x1_slice    = 0.0

<output17>
file_type   = hdf5
variable    = z4c
ghost_zones = true
dt          = 0.5
x1_slice    = 0.0

#
# :D
#